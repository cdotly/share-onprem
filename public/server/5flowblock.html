
    <html lang="en" class="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="generator" content="Hugo 0.53" />
    <meta name="description"
    content="">

<meta name="author" content="SpiderOak Inc">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../images/so/orange/favicon-8bit.png" type="image/png">
    <title>SpiderOak Share File Sharing Documentation</title>

    

    <link href="../css/styles.css?1567607568" rel="stylesheet" type="text/css">
    <link href="../css/nav.css?1567607568" rel="stylesheet" type="text/css">
    <link href="../css/css-grid.css?1567607568" rel="stylesheet" type="text/css">
    <link href="../css/typography.css?1567607568" rel="stylesheet" type="text/css">
    <link href="../css/atom-one-dark-reasonable.css.css?1567607568" rel="stylesheet" type="text/css">


    
    
    

    
    <script src="../js/nav.js?1567607568"></script>
    <script src="../js/search.js?1567607568"></script>


</head><body class="grid-container">
<header class="header">
    <div class="header-inner">
            
    <div class="so-wordmark-wrapper">
        <div class="so-wordmark rotate-90">
            <a class="" href="https://shareapp.tk">
                <picture>
                    
                    <source media="(max-width: 991px)" 
                            srcset="../images/so/so-logo-gray.png, ../images/so/so-logo-gray@2x.png 2x">
                    
                    <source media="(min-width: 992px)" 
                            srcset="../images/so/so-logo-gray.png, ../images/so/so-logo-gray@2x.png 2x">

                    <img    class="img-fluid " 
                            src="../images/so/so-logo-gray.png" 
                            alt="SpiderOak Inc logo">
                </picture>
            </a>
        </div>
    </div>
    
        <span class="so-branch">SpiderOak Technology</span>

    </div>   
</header>




<div class="sticky-top ">
        <div class="sticky-top-inner">


<div class="product-logo-wrapper">
    <a href="https://shareapp.tk">
            <img class="product-logo" alt="SpiderOak Share File Sharing 8 bit logo" srcset="../images/so/enclave8-bit.png, ../images/so/enclave-8bit@2x.png 2x" src="../images/so/enclave8-bit.png">
    </a>
    
    
</div>

<span class="product-title-long"> <a class="blackout" href="https://shareapp.tk">Share File Sharing
                    App Documentation</a></span>

            <span class="product-title">Share File Sharing</span>
            <span class="product-segment">App Documentation</span>
            

            
            <span class="so-branch">SpiderOak Technology</span>

        </div>
           
        <hr class="full-width" />

</div><nav class="nav">

    
    <div id="myNav" class="overlay">

        <div class="nav-close-wrapper">
            
            <a href="javascript:void(0)" class="nav-close" >
                <span onclick="closeNav()">Close</span>
                
            </a>
        </div>

        
        <div class="overlay-content">        <div class="menu menu-main">
            <ul>
                

                
                    
                    <li>
                        <a href="../server/">
                            
                            <span>Part One: Server Setup</span>
                        </a>
                    </li>
                    
                
                    
                    <li>
                        <a href="../admin/">
                            
                            <span>Part Two: Administrative</span>
                        </a>
                    </li>
                    
                
                    
                    <li>
                        <a href="../user/">
                            
                            <span>Part Three: End User</span>
                        </a>
                    </li>
                    
                

                
                <li>
                    <a href="#" target="_blank">Hardcoded Link 1</a>
                </li>

                <li>
                    <a href="#" target="_blank">Hardcoded Link 2</a>
                </li>
            </ul>
        </div>



            


        </div>

    </div>

    
    
    <a class="nav-open"> 
        <span onclick="openNav()">Menu</span>
    </a>

</nav>

<aside class="sidebar">
    <div class="sidebar-inner">
<div class="menu menu-section">





    
    
    
    
    
    
    

    

        <div class="section-h" >Server Setup</div>
        <ul>

            
            
           
                    
                    

                        
                        <ul class="nested" > 
                            <li class="" >
                                <a href="../server/1prerequisites.html">
                                    <span class="">Prerequisites</span>
                                </a>
                            </li>
                        </ul>
                        
                        
                    

                        
                        <ul class="nested" > 
                            <li class="" >
                                <a href="../server/2docker.html">
                                    <span class="">Obtaining Docker Images</span>
                                </a>
                            </li>
                        </ul>
                        
                        
                    

                        
                        <ul class="nested" > 
                            <li class="" >
                                <a href="../server/3keys.html">
                                    <span class="">Generating Keys</span>
                                </a>
                            </li>
                        </ul>
                        
                        
                    

                        
                        <ul class="nested" > 
                            <li class="" >
                                <a href="../server/4connection.html">
                                    <span class="">Connection Information Files</span>
                                </a>
                            </li>
                        </ul>
                        
                        
                    

                        
                        <ul class="nested" > 
                            <li class=" active " >
                                <a href="../server/5flowblock.html">
                                    <span class="">Running Flowblock</span>
                                </a>
                            </li>
                        </ul>
                        
                        
                    

                        
                        <ul class="nested" > 
                            <li class="" >
                                <a href="../server/6flowstore.html">
                                    <span class="">Running Flowstore</span>
                                </a>
                            </li>
                        </ul>
                        
                        
                    

                        
                        <ul class="nested" > 
                            <li class="" >
                                <a href="../server/7reverseproxy.html">
                                    <span class="">HTTPS Reverse Proxy</span>
                                </a>
                            </li>
                        </ul>
                        
                        
                    


                
                

               

        </ul>         
        
    
</div>        <div class="menu pagination">

                Next / Prev
                <ul>
                        

                        <li>
                          <a href="../server.html">Part One: Server Setup</a>
                        </li>

                        <li>
                                <a href="../admin.html">Part Two: Administrative</a>
                        </li>

                        <li>
                                <a href="../user.html">Part Three: End User</a>
                        </li>



                </ul> 
                
        </div>


</div>
</aside>
        <div class="content">
            <div class="content-inner">

                <div class="breadcrumbs">
    
    
    
    
    

        
     
        Running Flowblock

    
        

    
</div>




                <div class="main">
                    <p>The simplest way to run flowblock is by invoking docker directly:</p>

<pre><code>$ docker run -e &lt;ENV_VAR1&gt;=&lt;value&gt; -p 8400:8400 -p 8401:8401 &lt;flowblock_image&gt;:&lt;tag&gt;
</code></pre>

<p>The following environment variables must be set (eg. using the <code>-e</code> option to docker):</p>

<table>
<thead>
<tr>
<th align="center"><strong>Variable</strong></th>
<th align="center"><strong>Description</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">FLOWBLOCK_OBJECT_STORE_BASE_URL</td>
<td align="center">The base URL of the S3-compatible API.</td>
</tr>

<tr>
<td align="center">FLOWBLOCK_OBJECT_STORE_ACCESS_KEY</td>
<td align="center">The access key to use when accessing the S3 API.</td>
</tr>

<tr>
<td align="center">FLOWBLOCK_OBJECT_STORE_SECRET_KEY</td>
<td align="center">The secret key to use when accessing the S3 API.</td>
</tr>

<tr>
<td align="center">FLOWBLOCK_OBJECT_STORE_SECURE</td>
<td align="center">Whether or not the S3 API endpoint uses TLS.</td>
</tr>

<tr>
<td align="center">FLOWBLOCK_OBJECT_STORE_BLOCK_BUCKET_NAME</td>
<td align="center">Name of the S3 bucket to store flowblock objects in.</td>
</tr>

<tr>
<td align="center">FLOWBLOCK_OBJECT_STORE_BLOCK_BUCKET_REGION</td>
<td align="center">S3 region to use.</td>
</tr>

<tr>
<td align="center">FLOWBLOCK_AUTHTOKEN_SIGN_SK</td>
<td align="center">Authtoken signing secret key, from keygen (see Generating Keys above).</td>
</tr>

<tr>
<td align="center">FLOWBLOCK_AUTHTOKEN_VERIFY_PKS</td>
<td align="center">Authtoken signing public key.</td>
</tr>

<tr>
<td align="center">FLOWBLOCK_LOCAL_STORAGE_DIR</td>
<td align="center">Path to local cache directory.</td>
</tr>

<tr>
<td align="center">FLOWBLOCK_DEPLOYMENT_CIFS</td>
<td align="center">Connection Information Files (CIFs) paths and contents</td>
</tr>
</tbody>
</table>

<p>The following environment variables are optional:</p>

<table>
<thead>
<tr>
<th align="center"><strong>Variable</strong></th>
<th align="center"><strong>Description</strong></th>
</tr>
</thead>

<tbody>
<tr>
<td align="center">FLOWBLOCK_DEBUG_HTTP_ADDRESS</td>
<td align="center"><code>&lt;hostname&gt;:&lt;port&gt;</code> to bind debug HTTP listening socket. Default: 0.0.0.0:8402</td>
</tr>

<tr>
<td align="center">FLOWBLOCK_DEBUG_HTTP_HEALTHZ_PATH</td>
<td align="center">URL path (on the debug HTTP socket) to the &ldquo;healthz&rdquo; endpoint. This is a no-op and can be used for container liveness checks. Default: /healthz</td>
</tr>

<tr>
<td align="center">FLOWBLOCK_DEBUG_HTTP_METRICS_PATH</td>
<td align="center">URL path (on the debug HTTP socket) where Prometheus metrics will be exposed. Default: /metrics</td>
</tr>

<tr>
<td align="center">FLOWBLOCK_SERVICE_HTTP_ADDRESS</td>
<td align="center"><code>&lt;hostname&gt;:&lt;port&gt;</code> to bind HTTP listening socket. Default: 0.0.0.0:8401</td>
</tr>
</tbody>
</table>

<p>An alternative way to run flowblock is using an .list file with the variables listed. Create a file called <code>env-block.list</code> and  list the variables and your specific values like this (values listed are sample values, please replace with your own):</p>

<pre><code>FLOWBLOCK_OBJECT_STORE_BASE_URL=https://sharetest.us-east-2.amazonaws.com
FLOWBLOCK_OBJECT_STORE_ACCESS_KEY=gPc+8EKpc0YS+VUPphS1CAXbZpc0YS+VUPphS1CAXbZOoJ
FLOWBLOCK_OBJECT_STORE_SECRET_KEY=SK37UETVSIWQSK37UETVSIWQ
FLOWBLOCK_OBJECT_STORE_SECURE=true
FLOWBLOCK_OBJECT_STORE_BLOCK_BUCKET_NAME=share-test
FLOWBLOCK_OBJECT_STORE_BLOCK_BUCKET_REGION=us-east-2
FLOWBLOCK_AUTHTOKEN_SIGN_SK=injUfjaBgrS5wsWxlasjdprinjUfjaBgrS5wsWxlasjdpr
FLOWBLOCK_AUTHTOKEN_VERIFY_PKS=AfoAACJhdXRodG9rZW4uQXV0aGVudGljYXRpb25TZXJ2aWNlS2V5AQBDPgMEr4TBF9iov6f-Fbx21cYJtp0PK4ZhH5y88gD6buMRlpozPolkX6F5fLu4vjQo9MywQklHcFpJHmFsXRxT4sk9-AIASD4FMEQCIHDr-AfoAACJhdXRodGXVljYXRpb25TZXJ2aWNlS2V5AQBDPgMEr4TBF9iov6f-Fbx21cYJtp0PK4ZhH5yPolkX6F5fLu4vjQo9MywQklHcFpJHmFsXRxT4sk9-AIASD4FMEQCIHDr
FLOWBLOCK_LOCAL_STORAGE_DIR=/block_local_storage
FLOWBLOCK_DEPLOYMENT_CIF_HASH_PATH=/b4084b2a72985a1004ae3be85739597b4084b2a72985a1004ae3be85739597
FLOWBLOCK_DEPLOYMENT_CIF={&quot;blockAddr&quot;:&quot;http://flow-block.testingcif.com&quot;,&quot;storeAddr&quot;:&quot;http://flow-store.testingcif.com&quot;}
</code></pre>

<p>When running the command with a .list file, omit the <code>-e &lt;ENV_VAR1&gt;=&lt;value&gt;</code> portion of the command and instead run a command like this:</p>

<pre><code>docker run -p 8400:8400 -p 8401:8401 registry.spideroak.com/share-onprem/flowblock:latest --env-file=/path/to/env-block.list/
</code></pre>

                </div>

            </div>
        </div>


<footer class="footer">

        <hr class="full-width" />

        <div class="footer-inner">
            <div class="so-branch">
                SpiderOak Technology
            </div>

            <div class="so-tagline">
                Securing the world's data, bit by bit.
            </div>

            <p class="copyright">
                © 2019 <a href="https://spideroak.com">SpiderOak Inc.</a> All rights reserved.
            </p>
        </div>
        

</footer></body>